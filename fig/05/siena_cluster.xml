<?xml version='1.0'?>
<!DOCTYPE platform SYSTEM "https://simgrid.org/simgrid.dtd">
<platform version="4.1">
    <zone id="AS0" routing="Full">

        <!-- The host on which the WMS will run -->
        <host id="WMSHost" speed="10Gf" pstate="0" core="24">
            <disk id="hard_drive" read_bw="100MBps" write_bw="10000MBps">
                <prop id="size" value="5000GiB"/>
                <prop id="mount" value="/scratch"/>
            </disk>
            <!-- The power consumption in watt for each pstate (idle:all_cores) -->
            <prop id="wattage_per_state" value="115:216" />
            <prop id="wattage_off" value="0.0" />
        </host>

        <!-- The host on which the VirtualizedClusterComputeService will run -->
        <host id="VirtualizedClusterProviderHost" speed="32Gf" pstate="0" core="24">
            <prop id="wattage_per_state" value="115:216" />
            <prop id="wattage_off" value="0.0" />
       </host>

        <host id="VirtualizedClusterHost1" speed="32Gf,28Gf,20Gf,12Gf,8Gf" pstate="0" core="24">
            <prop id="ram" value="188GiB" />
            <!-- The power consumption in watt for each pstate (idle:all_cores) -->
            <prop id="wattage_per_state" value="116:133:220, 114:129:202, 111:125:186, 108:121:170,106:118:156"/>
            <prop id="wattage_off" value="10" />
        </host>

        <host id="VirtualizedClusterHost2" speed="32Gf,28Gf,20Gf,12Gf,8Gf" pstate="0" core="24">
            <prop id="ram" value="188GiB" />
            <!-- The power consumption in watt for each pstate (idle:all_cores) -->
            <prop id="wattage_per_state" value="116:133:220, 114:129:202, 111:125:186, 108:121:170,106:118:156"/>

            <prop id="wattage_off" value="10" />
        </host>

        <host id="VirtualizedClusterHost3" speed="32Gf,28Gf,20Gf,12Gf,8Gf" pstate="0" core="24">
            <prop id="ram" value="188GiB" />
            <!-- The power consumption in watt for each pstate (idle:all_cores) -->
            <prop id="wattage_per_state" value="116:133:220, 114:129:202, 111:125:186, 108:121:170,106:118:156"/>

            <prop id="wattage_off" value="10" />
        </host>

        <!-- A network link -->
        <link id="network_link" bandwidth="1250MBps" latency="10us"/>
        <!-- WMSHost's local "loopback" link -->
        <link id="loopback_WMSHost" bandwidth="1000EBps" latency="0us"/>
        <!--VirtualizedClusterProviderHost's local "loopback" link -->
        <link id="loopback_VirtualizedClusterProviderHost" bandwidth="1000EBps" latency="0us"/>
        <!--VirtualizedClusterHost1's local "loopback" link -->
        <link id="loopback_VirtualizedClusterHost1" bandwidth="1000EBps" latency="0us"/>
        <!--VirtualizedClusterHost2's local "loopback" link -->
        <link id="loopback_VirtualizedClusterHost2" bandwidth="1000EBps" latency="0us"/>
        <!--VirtualizedClusterHost3's local "loopback" link -->
        <link id="loopback_VirtualizedClusterHost3" bandwidth="1000EBps" latency="0us"/>

        <!-- The network link connects the two hosts -->
        <route src="WMSHost" dst="VirtualizedClusterProviderHost"> <link_ctn id="network_link"/> </route>
        <route src="WMSHost" dst="VirtualizedClusterHost1"> <link_ctn id="network_link"/> </route>
        <route src="WMSHost" dst="VirtualizedClusterHost2"> <link_ctn id="network_link"/> </route>
        <route src="WMSHost" dst="VirtualizedClusterHost3"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterProviderHost" dst="VirtualizedClusterHost1"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterProviderHost" dst="VirtualizedClusterHost2"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterProviderHost" dst="VirtualizedClusterHost3"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterHost1" dst="VirtualizedClusterHost2"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterHost1" dst="VirtualizedClusterHost3"> <link_ctn id="network_link"/> </route>
        <route src="VirtualizedClusterHost2" dst="VirtualizedClusterHost3"> <link_ctn id="network_link"/> </route>

        <!-- Each loopback link connects each host to itself -->
        <route src="WMSHost" dst="WMSHost">
            <link_ctn id="loopback_WMSHost"/>
        </route>
        <route src="VirtualizedClusterProviderHost" dst="VirtualizedClusterProviderHost">
            <link_ctn id="loopback_VirtualizedClusterProviderHost"/>
        </route>
        <route src="VirtualizedClusterHost1" dst="VirtualizedClusterHost1">
            <link_ctn id="loopback_VirtualizedClusterHost1"/>
        </route>
        <route src="VirtualizedClusterHost2" dst="VirtualizedClusterHost2">
            <link_ctn id="loopback_VirtualizedClusterHost2"/>
        </route>
        <route src="VirtualizedClusterHost3" dst="VirtualizedClusterHost3">
            <link_ctn id="loopback_VirtualizedClusterHost3"/>
        </route>
    </zone>
</platform>